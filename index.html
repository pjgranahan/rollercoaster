<!DOCTYPE HTML>
<html>

<head>
	<script type="text/javascript">
	window.onload = function () {

		var dps = []; // dataPoints
		
        CanvasJS.addColorSet("bitcoin_colors",
                [//colorSet Array
                "#FF9900"              
                ]);

		var chart = new CanvasJS.Chart("chartContainer",{
			title :{
				text: "Bitcoin Rollercoaster"
			},			
			colorSet: "bitcoin_colors",
			data: [{
				type: "line",
				dataPoints: dps 
			}]
		});

		var xVal = 0;
		var yVal = 100;	
		var updateInterval = 30;
		var dataLength = 200; // number of dataPoints visible at any point

		var updateChart = function (count) {
			count = count || 1;
			// count is number of times loop runs to generate random dataPoints.
			
			for (var j = 0; j < count; j++) {	
				yVal = yVal +  Math.round(5 + Math.random() *(-5-5));
				dps.push({
					x: xVal,
					y: yVal
				});
				xVal++;
			};
			if (dps.length > dataLength)
			{
				dps.shift();				
			}
			
			chart.render();
          
		};
		
		var clearCanvas = function () {
   			canvas.context.clearRect(0, 0, canvas.width, canvas.height);
   			if(STX.isAndroid && !STX.is_chrome){
      			var w=canvas.width;
      			canvas.width=1;
      			canvas.width=w;
   			}
		};

		// generates first set of dataPoints
      	
// 		updateChart(dataLength); 
      	

		// update chart after specified time. 
		setInterval(function(){updateChart();}, updateInterval); 
		setInterval(function(){clearCanvas();}, updateInterval); 

	}
	</script>
	<script type="text/javascript" src="canvasjs.min.js"></script>
</head>
<body>
	<div id="chartContainer" style="height: 300px; width: 100%;">
	</div>
</body>
</html>
